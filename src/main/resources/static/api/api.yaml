openapi: 3.1.0
info:
  title: Shopping List Main Service
  version: 1.0.0

paths:

  /v1/shoppingLists/{userId}:
    get:
      operationId: getShoppingListForUser
      summary: Retrieve all shopping lists for user.
      description: Retrieve all shopping lists that were created by specified user.
      tags:
        - ShoppingLists
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:

        "200":
          description: Everything went fine
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/shoppingList"

        "403":
          $ref: "#/components/responses/forbidden"

        "404":
          $ref: "#/components/responses/notFound"


  /v1/recipes/{userId}:
    get:
      operationId: getRecipesForUser
      summary: Retrieve all recipes for user.
      description: Retrieve all recipes that were created by specified user.
      tags:
        - Recipes
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:

        "200":
          description: Everything went fine
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/recipe"

        "403":
          $ref: "#/components/responses/forbidden"

        "404":
          $ref: "#/components/responses/notFound"

  /v1/publicRecipes:
    get:
      operationId: getPublicRecipes
      summary: Retrieve all public recipes.
      description: Retrieve all recipes that are public.
      tags:
        - Recipes
      responses:

        "200":
          description: Everything went fine
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/recipe"

        "404":
          $ref: "#/components/responses/notFound"

  /v1/units:
    get:
      operationId: getAllUnits
      tags:
        - Units
      summary: Retrieve all units.
      responses:

        "200":
          description: Everything went fine
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string


  /v1/categories:
    get:
      operationId: getAllCategories
      tags:
        - Categories
      summary: Retrieve all categories.
      responses:

        "200":
          description: Everything went fine
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

components:

  schemas:

    shoppingList:
      type: object
      required:
        - name
        - updatedAt
        - createdAt
        - itemsPerCategory
      properties:
        name:
          type: string
        updatedAt:
          type: string
        createdAt:
          type: string
        itemsPerCategory:
          type: array
          items:
            $ref: "#/components/schemas/categorizedItem"

    categorizedItem:
      type: object
      required:
        - category
        - items
      properties:
        category:
          type: string
        items:
          type: array
          items:
            $ref: "#/components/schemas/shoppingListItem"

    shoppingListItem:
      type: object
      required:
        - name
        - quantity
        - unit
        - purchased
      properties:
        name:
          type: string
        quantity:
          type: integer
        unit:
          type: string
        purchased:
          type: boolean

    recipe:
      type: object
      required:
        - name
        - updatedAt
        - createdAt
        - items
      properties:
        name:
          type: string
        updatedAt:
          type: string
        createdAt:
          type: string
        items:
          type: array
          items:
            $ref: "#/components/schemas/recipeItem"

    recipeItem:
      type: object
      required:
        - name
        - quantity
        - unit
        - category
      properties:
        name:
          type: string
        quantity:
          type: integer
        unit:
          type: string
        category:
          type: string

  responses:
    forbidden:
      description: "The client doesn't have access rights to the content"
      content:
        application/json:
          schema:
            type: string

    notFound:
      description: "The requested resource could not be found"
      content:
        application/json:
          schema:
            type: string

